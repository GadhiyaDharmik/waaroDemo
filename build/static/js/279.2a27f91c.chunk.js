"use strict";(self.webpackChunkdata_shopper=self.webpackChunkdata_shopper||[]).push([[279],{1281:()=>{},2110:(e,t,r)=>{r.d(t,{A:()=>u});var a=r(5043),o=r(8387),s=r(8610),n=r(2108),l=r(6431),i=r(1596),c=r(2532),d=r(2372);function p(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var m=r(579);const h=(0,n.Ay)(i.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),u=a.forwardRef((function(e,t){const r=(0,l.b)({props:e,name:"MuiCard"}),{className:a,raised:n=!1,...i}=r,c={...r,raised:n},d=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(c);return(0,m.jsx)(h,{className:(0,o.A)(d.root,a),elevation:n?8:void 0,ref:t,ownerState:c,...i})}))},2445:(e,t,r)=>{function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,r]=t;return r&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||"string"!==typeof e[r])return!1;return!0}(r,e)}}r.d(t,{A:()=>a})},5865:(e,t,r)=>{r.d(t,{A:()=>j});var a=r(5043),o=r(8387),s=r(8610),n=r(1655),l=r(2108),i=r(6262),c=r(6431),d=r(6803),p=r(2445),m=r(2532),h=r(2372);function u(e){return(0,h.Ay)("MuiTypography",e)}(0,m.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var x=r(579);const b={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},g=(0,n.Dg)(),f=(0,l.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],"inherit"!==r.align&&t[`align${(0,d.A)(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})((0,i.A)((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,r]=e;return"inherit"!==t&&r&&"object"===typeof r})).map((e=>{let[t,r]=e;return{props:{variant:t},style:r}})),...Object.entries(t.palette).filter((0,p.A)()).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[r]=e;return{props:{color:`text${(0,d.A)(r)}`},style:{color:(t.vars||t).palette.text[r]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},j=a.forwardRef((function(e,t){const{color:r,...a}=(0,c.b)({props:e,name:"MuiTypography"}),n=g({...a,...!b[r]&&{color:r}}),{align:l="inherit",className:i,component:p,gutterBottom:m=!1,noWrap:h=!1,paragraph:j=!1,variant:A="body1",variantMapping:v=y,...C}=n,N={...n,align:l,color:r,className:i,component:p,gutterBottom:m,noWrap:h,paragraph:j,variant:A,variantMapping:v},w=p||(j?"p":v[A]||y[A])||"span",S=(e=>{const{align:t,gutterBottom:r,noWrap:a,paragraph:o,variant:n,classes:l}=e,i={root:["root",n,"inherit"!==e.align&&`align${(0,d.A)(t)}`,r&&"gutterBottom",a&&"noWrap",o&&"paragraph"]};return(0,s.A)(i,u,l)})(N);return(0,x.jsx)(f,{as:w,ref:t,className:(0,o.A)(S.root,i),...C,ownerState:N,style:{..."inherit"!==l&&{"--Typography-textAlign":l},...C.style}})}))},6279:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var a=r(8903),o=r(2110),s=r(6494),n=r(5865),l=r(3519),i=r(1072),c=r(8602),d=r(4282),p=r(5043),m=(r(1281),r(5518)),h=r(7488),u=r(8258),x=r(3722),b=r(8231),g=r(579);function f(e){let{showPayment:t,cartItems:r,userData:a,finalPrice:o}=e;const[s,n]=(0,p.useState)({firstName:"",lastName:"",mobile:"",state:"",city:"",pinCode:"",address:""}),m=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r})))};return(0,g.jsx)(l.A,{className:"p-0",children:(0,g.jsxs)(u.A,{className:"p-4 shadow-lg border-0",style:{width:"100%"},children:[(0,g.jsx)("h2",{className:"mb-4 text-dark fw-bold",children:"Billing Address"}),(0,g.jsxs)(x.A,{children:[(0,g.jsxs)(i.A,{className:"mb-3",children:[(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"First Name"}),(0,g.jsx)(x.A.Control,{type:"text",name:"firstName",value:s.firstName,onChange:m,placeholder:"Enter First Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Last Name"}),(0,g.jsx)(x.A.Control,{type:"text",name:"lastName",value:s.lastName,onChange:m,placeholder:"Enter Last Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,g.jsxs)(i.A,{className:"mb-3",children:[(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Mobile No."}),(0,g.jsx)(x.A.Control,{type:"text",name:"mobile",value:s.mobile,onChange:m,placeholder:"Enter Mobile No.",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"State"}),(0,g.jsx)(x.A.Control,{type:"text",name:"state",value:s.state,onChange:m,placeholder:"Enter State Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,g.jsxs)(i.A,{className:"mb-3",children:[(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"City"}),(0,g.jsx)(x.A.Control,{type:"text",name:"city",value:s.city,onChange:m,placeholder:"Enter City Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,g.jsx)(c.A,{md:6,children:(0,g.jsxs)(x.A.Group,{children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Pin Code"}),(0,g.jsx)(x.A.Control,{type:"text",name:"pinCode",value:s.pinCode,onChange:m,placeholder:"Enter Pin Code",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,g.jsxs)(x.A.Group,{className:"mb-4",children:[(0,g.jsx)(x.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Street Address"}),(0,g.jsx)(x.A.Control,{type:"text",name:"address",value:s.address,onChange:m,placeholder:"Enter Your Full Address",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]}),(0,g.jsx)(d.A,{variant:"primary",style:{backgroundColor:"#fabb18",borderColor:"#fabb18",fontSize:"16px",fontWeight:"bold"},className:"w-100",onClick:()=>{t(s)},children:"Continue"})]})]})})}const y=()=>new Promise((e=>{if(window.Razorpay)return void e(!0);const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}));function j(e){let{userData:t,finalPrice:r,formData:a,cartItems:o,navigate:s}=e;const n=async e=>{try{console.log(e);if(!await y())return void alert("Failed to load Razorpay SDK. Please check your internet connection.");const n=await m.A.post("https://waaro.in/api/razorpay/create-order",{amount:r});console.log("Order Created:",n);const l={key:"rzp_test_n1tVJTQIyH4mNV",amount:n.amount,currency:n.currency,order_id:n.id,name:"Data Shopper",description:"Test Transaction",handler:async e=>{const n=await m.A.post("https://waaro.in/api/razorpay/verify-payment",e);if(n.success){const e=await A(o,a,t,n,r);null!==e&&void 0!==e&&e.success?(h.oR.success("Payment Successful!"),s("/your-data")):(h.oR.success("Payment Successful!"),alert("Failed to create bill"))}else h.oR.error("Payment Failed!")},prefill:{name:t.name,email:t.email,contact:t.mobile},theme:{color:"#3399cc"},method:{card:"card"===e,upi:"upi"===e,netbanking:"netbanking"===e}};new window.Razorpay(l).open()}catch(n){console.error("Payment Error:",n)}};return(0,g.jsxs)(l.A,{className:"m-0 p-0 bg-transparent",children:[(0,g.jsxs)(u.A,{className:"p-3 mb-3 shadow-sm border-0",style:{backgroundColor:"#FFF",borderRadius:"12px"},children:[(0,g.jsx)("h5",{className:"fw-bold",style:{color:"#fabb18"},children:"Billing Address"}),(0,g.jsx)("p",{className:"mb-0 fw-semibold text-dark",children:"Dheera Tech."}),(0,g.jsxs)("p",{className:"text-dark mb-0",style:{fontSize:"20px"},children:["205, Iscon Elegance SG Hwy Service Rd, ",(0,g.jsx)("br",{}),"Prahlad Nagar, Ahmedabad, Gujarat 380015"]})]}),(0,g.jsxs)(u.A,{className:"p-3 shadow-sm border-0",style:{backgroundColor:"#FFF",borderRadius:"12px"},children:[(0,g.jsx)("h5",{className:"fw-bold",style:{color:"#fabb18"},children:"Payment"}),(0,g.jsx)("p",{className:"text-muted",style:{fontSize:"14px"},children:"Instant Payment"}),(0,g.jsxs)("div",{className:"payment-options",style:{fontSize:"25px"},children:[(0,g.jsxs)(i.A,{className:"p-2 border rounded mb-2 align-items-center",style:{borderColor:"#000000"},onClick:()=>{n("card")},children:[(0,g.jsx)(c.A,{className:"text-dark",children:"Card"}),(0,g.jsxs)(c.A,{className:"text-end",children:[(0,g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Visa.svg/120px-Visa.svg.png",alt:"Visa",width:"40"}),(0,g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/100px-Mastercard-logo.svg.png",alt:"Mastercard",width:"40"})]})]}),(0,g.jsxs)(i.A,{className:"p-2 border rounded mb-2 align-items-center",style:{borderColor:"#000000"},onClick:()=>{n("upi")},children:[(0,g.jsx)(c.A,{className:" text-dark",children:"UPI"}),(0,g.jsx)(c.A,{className:"text-end",children:(0,g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/2560px-UPI-Logo-vector.svg.png",alt:"UPI",width:"60"})})]}),(0,g.jsxs)(i.A,{className:"p-2 border rounded align-items-center",style:{borderColor:"#D3C6FF"},onClick:()=>{n("netbanking")},children:[(0,g.jsx)(c.A,{className:"text-dark",children:"Net Banking"}),(0,g.jsx)(c.A,{className:"text-end",children:(0,g.jsx)("span",{className:"text-muted fw-semibold",children:"Net @ Banking"})})]})]})]})]})}const A=async(e,t,r,a,o)=>{try{const s=await m.A.post("https://waaro.in/api/create-bill",{cartItems:e,formData:t,userData:r,verifyRes:a,amount:o});return console.log(s),s}catch(n){var s;return console.error("Error creating bill:",(null===(s=n.response)||void 0===s?void 0:s.data)||n.message),null}},v=function(e){let{cartItems:t,userData:r,finalPrice:a}=e;const[o,s]=(0,p.useState)(!1),[n,l]=(0,p.useState)(null),i=(0,b.Zp)();return(0,g.jsx)("div",{children:o?(0,g.jsx)(j,{userData:r,finalPrice:a,formData:n,cartItems:t,navigate:i}):(0,g.jsx)(f,{showPayment:e=>{l(e),console.log(t),s(!0)},cartItems:t,userData:r,finalPrice:a})})};function C(e){let{dummyData:t,cartItems:r,setCartItems:l}=e;return(0,p.useEffect)((()=>{t&&t.length&&l(t)}),[t]),0===r.length?(0,g.jsx)("div",{children:"Loading your cart..."}):(0,g.jsxs)("div",{className:"cartListContainer",children:[(0,g.jsx)("h3",{children:"Your Cart"}),(0,g.jsx)(a.Ay,{container:!0,spacing:2,justifyContent:"center",children:r.map(((e,t)=>(0,g.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:(0,g.jsxs)(o.A,{style:{backgroundColor:"#000000",borderRadius:"15px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"5px solid #000"},children:[(0,g.jsx)("div",{style:{backgroundColor:"#000",height:"120px",backgroundImage:`url(${e.image})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,g.jsxs)(s.A,{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0px",padding:"12px",color:"#ffffff",flex:1},children:[(0,g.jsxs)(n.A,{variant:"h6",style:{fontWeight:"bold"},className:"card-text",children:[e.title,(0,g.jsx)("br",{}),e.description]}),(0,g.jsx)("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #ffffff"}}),(0,g.jsx)(d.A,{variant:"text",style:{color:"#FABB18",display:"flex",alignItems:"center",fontWeight:"bold"},onClick:()=>async function(e){try{(await m.A.delete(`https://waaro.in/api/cart/remove/${e.cartId}`)).success&&l((t=>t.filter((t=>t.cartId!==e.cartId))))}catch(t){console.error("Error removing item:",t)}}(e),children:"Remove"})]})]})},t)))})]})}const N=function(){var e,t;const[r,a]=(0,p.useState)(0),[o,s]=(0,p.useState)(!0),[n,d]=(0,p.useState)([]),[h,u]=(0,p.useState)([]),[x,b]=(0,p.useState)(null),[f,y]=(0,p.useState)(null);return(0,p.useEffect)((()=>{m.A.get("/cart/items").then((e=>{e.success&&(d(e.cartItems.map((e=>({cartId:e._id,...e.dataCategoryId})))),u(e.cartItems),y(e.cartItems.map((e=>({cartId:e._id,...e.dataCategoryId}))).map((e=>e.price||0)).reduce(((e,t)=>e+t),0)))})).catch((e=>console.log(e)))}),[]),(0,g.jsx)("div",{className:"dashboard",children:(0,g.jsx)(l.A,{fluid:!0,children:(0,g.jsxs)(i.A,{className:"cartMainContainer",children:[(0,g.jsx)(c.A,{md:7,children:1===r?(0,g.jsx)(v,{cartItems:h,userData:x,finalPrice:f}):(0,g.jsx)(C,{dummyData:n,cartItems:n,setCartItems:d})}),(0,g.jsx)(c.A,{md:5,children:(0,g.jsxs)("div",{className:"cartTotalContainer",children:[(0,g.jsxs)("div",{className:"totalHead subtotal ",children:[(0,g.jsx)("h3",{children:"Subtotal"}),(0,g.jsx)("div",{className:"d-flex justify-content-end",children:(0,g.jsxs)("h4",{className:"",children:["\u20b9",null===(e=n.map((e=>e.price)))||void 0===e?void 0:e.reduce(((e,t)=>e+t),0)]})})]}),(0,g.jsxs)("div",{className:"coupon",children:[(0,g.jsx)("span",{children:"Have a Coupon Code?"}),(0,g.jsx)("input",{type:"text",placeholder:"Enter code"})]}),o?(0,g.jsx)("div",{className:"continue-btn",onClick:()=>{var e;a(1),s(!1),b(null===(e=JSON.parse(localStorage.getItem("userDetail")))||void 0===e?void 0:e.user)},children:"Continue"}):(0,g.jsxs)("div",{className:"d-flex mt-10 justify-content-between align-items-center",children:[(0,g.jsx)("h5",{className:"m-0",children:"Total Pay"}),(0,g.jsxs)("span",{className:"fw-bold",style:{color:"#fabb18"},children:["\u20b9",null===(t=n.map((e=>e.price)))||void 0===t?void 0:t.reduce(((e,t)=>e+t),0)]})]})]})})]})})})}},6494:(e,t,r)=>{r.d(t,{A:()=>h});var a=r(5043),o=r(8387),s=r(8610),n=r(2108),l=r(6431),i=r(2532),c=r(2372);function d(e){return(0,c.Ay)("MuiCardContent",e)}(0,i.A)("MuiCardContent",["root"]);var p=r(579);const m=(0,n.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),h=a.forwardRef((function(e,t){const r=(0,l.b)({props:e,name:"MuiCardContent"}),{className:a,component:n="div",...i}=r,c={...r,component:n},h=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},d,t)})(c);return(0,p.jsx)(m,{as:n,className:(0,o.A)(h.root,a),ownerState:c,ref:t,...i})}))}}]);
//# sourceMappingURL=279.2a27f91c.chunk.js.map