"use strict";(self.webpackChunkdata_shopper=self.webpackChunkdata_shopper||[]).push([[279],{12110:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(65043),r=a(58387),o=a(98610),n=a(34535),l=a(6431),i=a(61596),c=a(92532),d=a(72372);function m(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var h=a(70579);const p=(0,n.Ay)(i.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),x=s.forwardRef((function(e,t){const a=(0,l.b)({props:e,name:"MuiCard"}),{className:s,raised:n=!1,...i}=a,c={...a,raised:n},d=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},m,t)})(c);return(0,h.jsx)(p,{className:(0,r.A)(d.root,s),elevation:n?8:void 0,ref:t,ownerState:c,...i})}))},26494:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(65043),r=a(58387),o=a(98610),n=a(34535),l=a(6431),i=a(92532),c=a(72372);function d(e){return(0,c.Ay)("MuiCardContent",e)}(0,i.A)("MuiCardContent",["root"]);var m=a(70579);const h=(0,n.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),p=s.forwardRef((function(e,t){const a=(0,l.b)({props:e,name:"MuiCardContent"}),{className:s,component:n="div",...i}=a,c={...a,component:n},p=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},d,t)})(c);return(0,m.jsx)(h,{as:n,className:(0,r.A)(p.root,s),ownerState:c,ref:t,...i})}))},31281:()=>{},36279:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(68903),r=a(12110),o=a(26494),n=a(94496),l=a(53519),i=a(61072),c=a(78602),d=a(14282),m=a(65043),h=(a(31281),a(55518)),p=a(57488),x=a(88258),u=a(73722),b=a(48231),f=a(70579);function j(e){let{showPayment:t,cartItems:a,userData:s,finalPrice:r}=e;const[o,n]=(0,m.useState)({firstName:"",lastName:"",mobile:"",state:"",city:"",pinCode:"",address:""}),h=e=>{const{name:t,value:a}=e.target;n((e=>({...e,[t]:a})))};return(0,f.jsx)(l.A,{className:"p-0",children:(0,f.jsxs)(x.A,{className:"p-4 shadow-lg border-0",style:{width:"100%"},children:[(0,f.jsx)("h2",{className:"mb-4 text-dark fw-bold",children:"Billing Address"}),(0,f.jsxs)(u.A,{children:[(0,f.jsxs)(i.A,{className:"mb-3",children:[(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"First Name"}),(0,f.jsx)(u.A.Control,{type:"text",name:"firstName",value:o.firstName,onChange:h,placeholder:"Enter First Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Last Name"}),(0,f.jsx)(u.A.Control,{type:"text",name:"lastName",value:o.lastName,onChange:h,placeholder:"Enter Last Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,f.jsxs)(i.A,{className:"mb-3",children:[(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Mobile No."}),(0,f.jsx)(u.A.Control,{type:"text",name:"mobile",value:o.mobile,onChange:h,placeholder:"Enter Mobile No.",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"State"}),(0,f.jsx)(u.A.Control,{type:"text",name:"state",value:o.state,onChange:h,placeholder:"Enter State Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,f.jsxs)(i.A,{className:"mb-3",children:[(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"City"}),(0,f.jsx)(u.A.Control,{type:"text",name:"city",value:o.city,onChange:h,placeholder:"Enter City Name",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})}),(0,f.jsx)(c.A,{md:6,children:(0,f.jsxs)(u.A.Group,{children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Pin Code"}),(0,f.jsx)(u.A.Control,{type:"text",name:"pinCode",value:o.pinCode,onChange:h,placeholder:"Enter Pin Code",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]})})]}),(0,f.jsxs)(u.A.Group,{className:"mb-4",children:[(0,f.jsx)(u.A.Label,{style:{color:"#fabb18",fontWeight:"bold"},children:"Street Address"}),(0,f.jsx)(u.A.Control,{type:"text",name:"address",value:o.address,onChange:h,placeholder:"Enter Your Full Address",style:{border:"2px solid #fabb18",fontSize:"12px",color:"#333"}})]}),(0,f.jsx)(d.A,{variant:"primary",style:{backgroundColor:"#fabb18",borderColor:"#fabb18",fontSize:"16px",fontWeight:"bold"},className:"w-100",onClick:()=>{t(o)},children:"Continue"})]})]})})}const y=()=>new Promise((e=>{if(window.Razorpay)return void e(!0);const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}));function g(e){let{userData:t,finalPrice:a,formData:s,cartItems:r,navigate:o}=e;const n=async e=>{try{console.log(e);if(!await y())return void alert("Failed to load Razorpay SDK. Please check your internet connection.");const n=await h.A.post("https://waaro.in/api/razorpay/create-order",{amount:a});console.log("Order Created:",n);const l={key:"rzp_test_n1tVJTQIyH4mNV",amount:n.amount,currency:n.currency,order_id:n.id,name:"Data Shopper",description:"Test Transaction",handler:async e=>{const n=await h.A.post("https://waaro.in/api/razorpay/verify-payment",e);if(n.success){const e=await A(r,s,t,n,a);null!==e&&void 0!==e&&e.success?(p.oR.success("Payment Successful!"),o("/your-data")):(p.oR.success("Payment Successful!"),alert("Failed to create bill"))}else p.oR.error("Payment Failed!")},prefill:{name:t.name,email:t.email,contact:t.mobile},theme:{color:"#3399cc"},method:{card:"card"===e,upi:"upi"===e,netbanking:"netbanking"===e}};new window.Razorpay(l).open()}catch(n){console.error("Payment Error:",n)}};return(0,f.jsxs)(l.A,{className:"m-0 p-0 bg-transparent",children:[(0,f.jsxs)(x.A,{className:"p-3 mb-3 shadow-sm border-0",style:{backgroundColor:"#FFF",borderRadius:"12px"},children:[(0,f.jsx)("h5",{className:"fw-bold",style:{color:"#fabb18"},children:"Billing Address"}),(0,f.jsx)("p",{className:"mb-0 fw-semibold text-dark",children:"Dheera Tech."}),(0,f.jsxs)("p",{className:"text-dark mb-0",style:{fontSize:"20px"},children:["205, Iscon Elegance SG Hwy Service Rd, ",(0,f.jsx)("br",{}),"Prahlad Nagar, Ahmedabad, Gujarat 380015"]})]}),(0,f.jsxs)(x.A,{className:"p-3 shadow-sm border-0",style:{backgroundColor:"#FFF",borderRadius:"12px"},children:[(0,f.jsx)("h5",{className:"fw-bold",style:{color:"#fabb18"},children:"Payment"}),(0,f.jsx)("p",{className:"text-muted",style:{fontSize:"14px"},children:"Instant Payment"}),(0,f.jsxs)("div",{className:"payment-options",style:{fontSize:"25px"},children:[(0,f.jsxs)(i.A,{className:"p-2 border rounded mb-2 align-items-center",style:{borderColor:"#000000"},onClick:()=>{n("card")},children:[(0,f.jsx)(c.A,{className:"text-dark",children:"Card"}),(0,f.jsxs)(c.A,{className:"text-end",children:[(0,f.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Visa.svg/120px-Visa.svg.png",alt:"Visa",width:"40"}),(0,f.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/100px-Mastercard-logo.svg.png",alt:"Mastercard",width:"40"})]})]}),(0,f.jsxs)(i.A,{className:"p-2 border rounded mb-2 align-items-center",style:{borderColor:"#000000"},onClick:()=>{n("upi")},children:[(0,f.jsx)(c.A,{className:" text-dark",children:"UPI"}),(0,f.jsx)(c.A,{className:"text-end",children:(0,f.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/2560px-UPI-Logo-vector.svg.png",alt:"UPI",width:"60"})})]}),(0,f.jsxs)(i.A,{className:"p-2 border rounded align-items-center",style:{borderColor:"#D3C6FF"},onClick:()=>{n("netbanking")},children:[(0,f.jsx)(c.A,{className:"text-dark",children:"Net Banking"}),(0,f.jsx)(c.A,{className:"text-end",children:(0,f.jsx)("span",{className:"text-muted fw-semibold",children:"Net @ Banking"})})]})]})]})]})}const A=async(e,t,a,s,r)=>{try{const o=await h.A.post("https://waaro.in/api/create-bill",{cartItems:e,formData:t,userData:a,verifyRes:s,amount:r});return console.log(o),o}catch(n){var o;return console.error("Error creating bill:",(null===(o=n.response)||void 0===o?void 0:o.data)||n.message),null}},v=function(e){let{cartItems:t,userData:a,finalPrice:s}=e;const[r,o]=(0,m.useState)(!1),[n,l]=(0,m.useState)(null),i=(0,b.Zp)();return(0,f.jsx)("div",{children:r?(0,f.jsx)(g,{userData:a,finalPrice:s,formData:n,cartItems:t,navigate:i}):(0,f.jsx)(j,{showPayment:e=>{l(e),console.log(t),o(!0)},cartItems:t,userData:a,finalPrice:s})})};function C(e){let{dummyData:t,cartItems:a,setCartItems:l}=e;return(0,m.useEffect)((()=>{t&&t.length&&l(t)}),[t]),0===a.length?(0,f.jsx)("div",{children:"Loading your cart..."}):(0,f.jsxs)("div",{className:"cartListContainer",children:[(0,f.jsx)("h3",{children:"Your Cart"}),(0,f.jsx)(s.Ay,{container:!0,spacing:2,justifyContent:"center",children:a.map(((e,t)=>(0,f.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:4,lg:4,xl:4,children:(0,f.jsxs)(r.A,{style:{backgroundColor:"#000000",borderRadius:"15px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center",border:"5px solid #000"},children:[(0,f.jsx)("div",{style:{backgroundColor:"#000",height:"120px",backgroundImage:`url(${e.image})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,f.jsxs)(o.A,{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0px",padding:"12px",color:"#ffffff",flex:1},children:[(0,f.jsxs)(n.A,{variant:"h6",style:{fontWeight:"bold"},className:"card-text",children:[e.title,(0,f.jsx)("br",{}),e.description]}),(0,f.jsx)("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #ffffff"}}),(0,f.jsx)(d.A,{variant:"text",style:{color:"#FABB18",display:"flex",alignItems:"center",fontWeight:"bold"},onClick:()=>async function(e){try{(await h.A.delete(`https://waaro.in/api/cart/remove/${e.cartId}`)).success&&l((t=>t.filter((t=>t.cartId!==e.cartId))))}catch(t){console.error("Error removing item:",t)}}(e),children:"Remove"})]})]})},t)))})]})}const N=function(){var e,t;const[a,s]=(0,m.useState)(0),[r,o]=(0,m.useState)(!0),[n,d]=(0,m.useState)([]),[p,x]=(0,m.useState)([]),[u,b]=(0,m.useState)(null),[j,y]=(0,m.useState)(null);return(0,m.useEffect)((()=>{h.A.get("/cart/items").then((e=>{e.success&&(d(e.cartItems.map((e=>({cartId:e._id,...e.dataCategoryId})))),x(e.cartItems),y(e.cartItems.map((e=>({cartId:e._id,...e.dataCategoryId}))).map((e=>e.price||0)).reduce(((e,t)=>e+t),0)))})).catch((e=>console.log(e)))}),[]),(0,f.jsx)("div",{className:"dashboard",children:(0,f.jsx)(l.A,{fluid:!0,children:(0,f.jsxs)(i.A,{className:"cartMainContainer",children:[(0,f.jsx)(c.A,{md:7,children:1===a?(0,f.jsx)(v,{cartItems:p,userData:u,finalPrice:j}):(0,f.jsx)(C,{dummyData:n,cartItems:n,setCartItems:d})}),(0,f.jsx)(c.A,{md:5,children:(0,f.jsxs)("div",{className:"cartTotalContainer",children:[(0,f.jsxs)("div",{className:"totalHead subtotal ",children:[(0,f.jsx)("h3",{children:"Subtotal"}),(0,f.jsx)("div",{className:"d-flex justify-content-end",children:(0,f.jsxs)("h4",{className:"",children:["\u20b9",null===(e=n.map((e=>e.price)))||void 0===e?void 0:e.reduce(((e,t)=>e+t),0)]})})]}),(0,f.jsxs)("div",{className:"coupon",children:[(0,f.jsx)("span",{children:"Have a Coupon Code?"}),(0,f.jsx)("input",{type:"text",placeholder:"Enter code"})]}),r?(0,f.jsx)("div",{className:"continue-btn",onClick:()=>{var e;s(1),o(!1),b(null===(e=JSON.parse(localStorage.getItem("userDetail")))||void 0===e?void 0:e.user)},children:"Continue"}):(0,f.jsxs)("div",{className:"d-flex mt-10 justify-content-between align-items-center",children:[(0,f.jsx)("h5",{className:"m-0",children:"Total Pay"}),(0,f.jsxs)("span",{className:"fw-bold",style:{color:"#fabb18"},children:["\u20b9",null===(t=n.map((e=>e.price)))||void 0===t?void 0:t.reduce(((e,t)=>e+t),0)]})]})]})})]})})})}}}]);
//# sourceMappingURL=279.a16b6050.chunk.js.map